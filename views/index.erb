<!DOCTYPE html>
<head>
  <title>Calentador Electrico</title>
  <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script type="text/javascript" src="https://www.google.com/jsapi"></script>
  <script type="text/javascript">
      google.load("visualization", "1", {packages:["corechart"]});
      var datos = [];

      $(document).ready(function(){
          $('#btn_submit').click(function(){
            datos = [];
            datos.push(["Segundos", "Temperatura"]);

            var tiempo_calentamiento = $('#tiempo_calentamiento').val();
            
            for (var i = 0; i < 10; i++){
              drawChart(tiempo_calentamiento);
            }
          });
      });

      function drawChart(tiempo) {
        $.ajax({
          url: '/graficar?tiempo=' + tiempo,
          async: false,
          success: function(data) {

            for (var i = 0; i < data.length; i++){
              datos.push(data[i]);
            }

            var data = google.visualization.arrayToDataTable(datos);
            
            var options = {
              title: 'Calentador Electrico'
            };
            var chart = new google.visualization.LineChart(document.getElementById('chart_div'));

            chart.draw(data, options);
          },
          dataType: 'json'
        });
      }
  </script>
</head>
<body>
  <input type="text" id="tiempo_calentamiento" placeholder="Tiempo Calentamiento (seg)" /><br />
  <input type="submit" value="Graficar" id="btn_submit"/>

  <div id="chart_div" style="width: 900px; height: 500px;"></div>
</body>
</html>
